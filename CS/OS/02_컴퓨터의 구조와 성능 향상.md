# 컴퓨터의 구조와 성능 향상

[TOC]



# 컴퓨터의 기본 구성

## 1. 하드웨어의 구성

- 필수 장치: 중앙처리장치(CPU), 메인메모리
- 주변장치: 입력장치, 출력장치, 저장장치

### CPU와 메모리

- CPU
  - 명령어를 해석하여 실행하는 장치
- 메모리
  - 작업에 필요한 프로그램과 데이터를 저장하는 장소
  - 바이트 단위로 분할되어 있고, 분할 공간마다 주소로 구분

### 입출력 장치

- 입력장치
  - 외부의 데이터를 컴퓨터에 입력하는 장치
  - 키보드, 마우스, 스캐너, 터치스크린
- 출력장치
  - 컴퓨터에서 처리한 결과를 사용자가 원하는 형태로 출력하는 장치
  - 프린터, 모니터, 스피커

### 저장장치

- 저장장치(하드디스크, CD 등)는 구동장치가 있는 기계이므로 속도가 느림
- 느린 장치를 사용하는 이유는 용량 대비 가격이 싸기 때문
- 저장장치는 메모리보다 느리지만, 저렴하고 용량이 크며 전원의 온/오프 여부와 상관없이 데이터를 영구적으로 저장
- 저장장치의 구분
  - 자성을 이용: 카세트테이프, 플로피디스크, 하드디스크
  - 레이저를 이용: CD, DVD, 블루레이디스크
  - 메모리를 이용: USB 드라이버, SD 카드, CF카드, SSD

### 메인보드

- CPU와 메모리 등 다양한 부품을 연결하는 커다란 판
- 다양한 버스가 복잡하게 얽혀있고 전력이 공급되면 버스로 연결된 부품이 작동
  - 버스: 일정한 규칙에 따라 각 장치에 데이터를 전송하는 역할



## 2. 폰-노이만 구조

- CPU, 메모리, 입출력장치, 저장장치가 버스로 연결되어있는 구조
- 폰노이만 구조 이전의 구조는 하드와이어링 형태였기 때문에 다른 용도로 사용하려면 전선의 연결을 바꾸어야 했음
- 폰노이만 구조는 메모리를 이용하여 프로그래밍이 가능한 하드웨어는 그대로 두고, 작업을 위한 프로그램만 교체하여 메모리에 올리는 방식
- 가장 중요한 특징은 **모든 프로그램은 메모리에 올라와야 실행할 수 있음**



## 3. 요리사 모형

- 운영체의 여러 현상에 대한 이해를 돕기 위한 모형
  - 요리사 - CPU
  - 도마 - 메모리
  - 보관창고 - 저장장치
  - 주방보조 & 보조요리사
  - 요리방법 결정 - 프로세스관리(CPU가 작업을 진행하는 것)
  - 도마위의 재료 정리 - 메모리관리
  - 보관창고의 재료 정리 - 저장장치 관리
- 다른 조건이 동일할 때 메모리가 작은 컴퓨터가 더 느린 이유, 메모리가 충분히 크면 작업 속도에 영향을 미치지 않는 이유 등도 설명이 가능하다.



## 4. 하드웨어 사양 관련 용어

### 클록(clock)

- CPU 속도의 단위
- 펄스(pulse), 클록틱(clock tick)이라고도 함
- 클록이 일정 간격으로 틱(tick)을 만들면 그에 맞추어 CPU의 구성 부품이 작업을 함

### 헤르츠(Hz)

- 클록틱이 발생하는 속도를 나타내는 단위
- 1`Hz`: 1초에 클록틱 한번
- 1`kHz`: 1초에 클록틱 1000번
- 3.4`GHz`는 1초에 클록틱이 3.4 x 10^9번 발생하여 CPU가 1초에 약 34억 번의 연산을 할 수 있음을 의미
- 메인보드의 성능 또한 클록으로 표시

### 시스템 버스와 CPU 내부 버스

- 시스템버스(system bus)
  - 메모리와 주변장치를 연결하는 버스
  - FSB(Front-Side Bus), 전면버스라고 함
- CPU 내부버스
  - CPU 내부에 있는 장치를 연결하는 버스
  - BSB(Back Side Bus), 후면버스라고 함
  - 시스템 버스보다 훨씬 빠름



# CPU와 메모리

## 1. CPU의 구성과 동작

### CPU의 기본 구성

- CPU란?
  - 명령어를 해석하여 실행하는 장치
  - 산술논리 연산장치, 제어장치, 레지스터로 구성되며 이들의 협업으로 작업처리
  - 요리사 모형에 빗대어보면
    - 요리: 산술논리 연산장치
    - 작업 지시: 제어장치
    - 재료 임시보관: 레지스터

#### 산술논리 연산장치

- Arithmetic and Logic Unit, ALU
- CPU에서 데이터를 연산하는 장치
- 연산
  - 산술연산: 덧셈/뺄셈/곱셈/나눗셈
  - 논리연산: AND, OR 등

#### 제어장치

- control unit
- CPU에서 작업을 지시하는 부분

#### 레지스터

- register
- CPU 내에 데이터를 임시로 보관하는 곳



### CPU의 명령어 처리과정

> 산술논리 연산장치, 제어장치, 레지스터가 협업하여 작업하는 과정

```c
int D2=2, D3=3, sum;
sum D2+D3
```

- CPU는 0과 1의 2진수로 이루어진 기계어(machine code)만 인식함

- 따라서 코드를 실행하기 위해서는 컴파일러를 활용하여 기계어로 바꾸어야 함. 위에 작성된 것은 기계어가 아니다. 

  - 기계어: CPU가 직접 해독하고 실행할 수 있는 **비트단위**로 쓰인 컴퓨터 언어
  - 컴파일러(compiler): 특정 프로그래밍 언어로 쓰여있는 문서를 다른 프로그래밍 언어로 옮기는 일종의 번역 프로그램
  - 어셈블리어(assembly languate): 기계어를 사람이 이해하기 쉬운 기호와 일대일로 대응시켜 기호화한 언어

- 위의 코드를 기계어로 바꾼 것을 어셈블리어로 작성하면 아래와 같이 쓸 수 있다.

  ```assem
  LOAD mem(100), register 2;
  LOAD mem(120), register 3;
  ADD register 5, register 2, register 3;
  MOVE register 5, mem(160);
  ```

- 위의 어셈블리어의 의미를 해석하면 다음과 같다.

  - 메모리의 100번지(D2)에 있는 값을 레지스터 2로 가져옴
  - 메모리의 120번지(D3)에 있는 값을 레지스터 3으로 가져옴
  - 레지스터 2와 3에 있는 값을 더해서 레지스터 5에 넣음
  - 레지스터 5의 값을 메모리 160번지(sum)으로 옮김

- 산술논리 연산장치의 작업

  - CPU가 연산을 하려면 필요한 데이터를 CPU로 가져와 임시로 보관해야 한다.
    - 이때 레지스터가 이용된다.
  - 이렇게 연산에 필요한 데이터가 준비되면(1, 2행) 산술논리 연산장치에서 두 값을 더한 결과값을 레지스터 5에 넣고,
  - 레지스터 5에 저장된 값을 메모리의 160번지에 옮긴다.

- 제어장치의 작업

  - 제어장치는 명령어를 해석하여 제어 신호를 보내고 CPU 내의 데이터 흐름을 조절함
  - 위의 예시에서 제어장치가 보내는 신호는
    - 메모리에서 데이터를 가져올 것
    - 덧셈을 실행할 것
    - 결과값을 메모리로 옮길 것 등등

- 정리

  - 제어장치는 명령어를 해석하여 흐름에 맞게 신호를 보내고, 레지스터는 연산에 필요한 데이터를 임시로 저장할 장소를 제공하며, 산술논리 연산장치는 제어장치가 보내는 신호를 수행

  

### 레지스터의 종류

- 사용자 가시 레지스터(user-visible register)
  - 데이터레지스터, 주소레지스터
- 사용자 불가시 레지스터(user-invisible register)
  - 프로그램 카운터, 명령어 레지스터, 메모리 주소 레지스터, 메모리 버퍼 레지스터

#### 데이터 레지스터(DR, data register)

- 메모리에서 가져온 데이터를 임시 보관하는 용도
- CPU에 있는 레지스터의 대부분을 차지하기 때문에 일반 레지스터 or 범용 레지스터라고 함

#### 주소 레지스터(AR, address register)

- 데이터 또는 명령어가 저장된 메모리의 주소가 저장되는 레지스터

#### 프로그램 카운터(PC, program counter)

- 다음에 실행할 **명령어의 주소**를 기억하고 있다가 제어장치에 알려줌

#### 명령어 레지스터(IR, instruction register)

- 현재 실행 중인 **명령어**를 저장

#### 메모리 주소 레지스터(MAR, memory address register)

- 메모리에서 데이터를 가져오거나 반대로 메모리로 데이터를 보낼 때 **주소**를 지정하기 위해 사용

#### 메모리 버퍼 레지스터(MBR, memory buffer register)

- 메모리에서 가져온 데이터나 메모리로 옮겨 갈 **데이터**를 임시로 저장. 항상 메모리 주소 레지스터와 함께 동작함

#### 그 외

- 이 외에도 많은 종류의 레지스터가 있음

  - 프로그램 상태 레지스터(program status register, PSR)
  - 플래그 레지스터(flag register)
  - 상태 레지스터(status register)
  - 컨디션 레지스터(condition register)

  

### 버스의 종류

- CPU와 메모리, 주변장치 간에 데이터를 주고받을 때 사용

#### 제어 버스(control bus)

- 다음에 어떤 작업을 할지 지시하는 제어 신호가 오고감

#### 주소 버스(address bus)

#### 데이터 버스(data bus)



## 2. 메모리의 종류와 부팅

### 메모리의 종류

#### 휘발성 메모리

#### 비휘발성 메모리



### 메모리 보호



### 부팅





# 컴퓨터 성능 향상 기술

## 1. 버퍼





## 2. 캐시



## 3. 저장장치의 계층 구조



## 4. 인터럽트









# 병렬 처리

## 1. 병렬 처리의 개념



## 2. 병렬 처리 시 고려 사항



## 3. 병렬 처리 기법







# 무어의 법칙과 암달의 법칙

## 1. 무어의 법칙



## 2. 암달의 법칙





---

# Q.

- 데이터를 가져오면 연산을 수행하기전에 임시로 레지스터에 보관하는데, 이때 레지스터의 어느 곳에 저장할지는 어떻게 결정됨?? 
- 최종 결과값을 메모리에 저장할 떄 저장할 메모리의 번지수는 어떻게 정함??

- 주소레지스터는 왜 필요해?
- 특수 레지스터에서 사용자가 임의로 변경할 수 없다는 게 무슨말인지 모르겠음
- 뭔놈의 레지스터가 이렇게 많이 필요해?
- 데이터 레지스터와 메모리 버퍼 레지스터의 차이는?